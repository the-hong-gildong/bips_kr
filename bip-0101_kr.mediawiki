<pre>
  BIP: 101
  레이어: 컨센서스 (하드 포크)
  제목: 최대 블록 사이즈 증가
  작성자: 게빈 앤더슨(Gavin Andresen) <gavinandresen@gmail.com>
  코멘트-요약: 아직 코멘트 없음.
  코멘트-URI: https://github.com/bitcoin/bips/wiki/Comments:BIP-0101
  상태: 중단됨
  타입: 표준 트랙
  생성일: 2015-06-22
</pre>
* 원문: https://github.com/bitcoin/bips/blob/master/bip-0101.mediawiki
* 싱크: https://github.com/bitcoin/bips/commit/959fecc15bdad070afa63455468b1dba54655fa6

==초록==

이 BIP는 고정된 1메가바이트의 최대 블록 크기를 시간이 지남에 따라 예측 가능한 비율로 증가하는 최대 크기로 대체할 것을 제안합니다.

==동기==

비트코인 네트워크의 거래량은 계속 증가하고 있으며, 곧 1메가바이트 최대 블록 크기에 의해 강요된 10분당 1메가바이트 제한에 도달할 것입니다. 최대 크기를 늘리면 해당 제한이 비트코인 채택과 성장에 미치는 영향을 줄일 수 있습니다.

==스펙==

배포 후(자세한 내용은 배포(Deployment) 섹션 참조), 메인 네트워크에서 허용되는 블록의 최대 크기는 블록 헤더의 타임스탬프를 기준으로 계산됩니다.

최대 크기는 타임스탬프 2016-01-11 00:00:00 UTC(타임스탬프 1452470400)에서 8,000,000 바이트이며, 2036-01-06 00:00:00 UTC(타임스탬프 2083190400)까지 63,072,000초(2년, 윤년 무시)마다 두 배씩 증가합니다. 두 배 증가 사이의 최대 블록 크기는 블록의 타임스탬프에 따라 선형적으로 증가합니다. 2036-01-06 00:00:00 UTC 이후 블록의 최대 크기는 8,192,000,000 바이트입니다.

(아래 배포 섹션에 설명되어 있는 것처럼) 블록 타임스탬프가 활성화 시간 이후라고 가정하여 정수 수학(integer math)을 사용하여 의사 코드로 표현:

    function max_block_size(block_timestamp):

        time_start = 1452470400
        time_double = 60*60*24*365*2
        size_start = 8000000
        if block_timestamp >= time_start+time_double*10
            return size_start * 2^10

        // Piecewise-linear-between-doublings growth:
        time_delta = block_timestamp - time_start
        doublings = time_delta / time_double
        remainder = time_delta % time_double
        interpolate = (size_start * 2^doublings * remainder) / time_double
        max_size = size_start * 2^doublings + interpolate

        return max_size

==배포==

배포는 해시파워 압도적 다수 투표(BIP34에서 사용된 기법과 유사)로 제어되지만, 가능한 가장 빠른 활성화 시간은 2016-01-11 00:00:00 UTC입니다.

활성화는 최상위 체인에 있는 1,000개의 연속 블록 중 750개의 버전 번호가 첫 번째, 두 번째, 세 번째, 30번째 비트(16진수 0x20000007)로 설정되면 이루어집니다. 활성화 시간은 750번째 블록의 타임스탬프에 2주(1,209,600초)의 유예 기간을 더하여 나머지 마이너나 서비스가 더 큰 블록을 지원하도록 업그레이드할 수 있는 시간을 제공합니다. 2016-01-11 00:00:00 UTC보다 2주 이상 전에 압도적 다수가 달성되면 활성화 시간은 2016-01-11 00:00:00 UTC가 됩니다.

블록 버전 번호는 활성화를 위해서만 사용되며, 활성화가 완료되면 최대 블록 크기는 블록의 버전 번호와 관계없이 사양(specification) 섹션에 설명된 대로 됩니다.

==테스트 네트워크==

테스트 네트워크 매개변수는 메인 네트워크와 동일하지만, 더 쉬운 암도적 다수 조건과 더 짧은 유예 기간으로 더 일찍 시작한다는 점이 다릅니다:

    starting time: 1 Aug 2015 (timestamp 1438387200)
    activation condition: 75 of 100 blocks
    grace period: 24 hours

==근거==

초기 크기 8,000,000 바이트는 현재 참조 구현 코드에서 블록사이즈를 증가시켜 테스트하고 대역폭이 제한된 네트워크의 채굴자(특히 중국의 만리방화벽 뒤에 있는 중국 채굴자)로부터 피드백을 받은 후 선택되었습니다.

2배 증가 간격은 CPU 성능, 스토리지 및 인터넷 대역폭의 장기적인 성장 추세를 기반으로 선택되었습니다. 기하급수적인 성장이 영원히 지속될 수 없기 때문에 20년이라는 제한이 선택되었습니다. 장기적인 추세가 계속되지 않는다면 마이너 합의(소프트 포크)를 통해 최대 블록 크기를 줄일 수 있습니다.

타임스탬프는 모든 블록의 헤더에 포함되어 있기 때문에 계산은 블록체인의 높이가 아닌 타임스탬프를 기준으로 합니다. 이를 통해 구현은 블록의 헤더를 다운로드한 후 트랜잭션을 다운로드하기 전에 블록의 최대 크기를 알 수 있습니다.

이 배포 계획은 Jeff Garzik이 제안한 BIP100 블록 크기 증가에서 가져온 것으로, 채굴자, 상인, 풀 노드 운영 최종 사용자에게 더 큰 블록을 지원하는 소프트웨어로 업그레이드할 수 있는 충분한 시간을 제공하기 위해 설계되었습니다. 75%의 압도적 다수가 선택되어 하나의 대규모 마이닝 풀이 블록 크기 증가에 대해 효과적인 거부권을 갖지 못하도록 했습니다. 버전 번호 체계는 피터 우일이 제안한 "버전 비트" BIP와 호환되도록 설계되었으며, 도입되는 과정에서 다른 합의 규칙 변경을 방해하지 않도록 설계되었습니다.

==이 제안에 대한 반대 의견==

1MB 블록 크기를 늘리는 것은 [https://www.google.com/webhp?#q=1mb+limit+site%3Abitcointalk.org 수년 동안 논의되고 토론되어 왔습니다].

===풀노드의 중앙화===

네트워크에서 도달 가능한 완전 검증 노드의 수는 꾸준히 감소하고 있습니다. 최대 블록 크기를 늘려 트랜잭션을 처리할 수 있는 네트워크의 용량을 늘리면 이러한 감소세가 가속화될 수 있으며, 이는 덜 분산된 네트워크로 인해 장애에 더 취약해질 수 있음을 의미합니다. 본 BIP의 작성자는 네트워크에서 노드를 완전히 검증하는 노드의 감소가 편리하고 매력적이며 안전하고 가벼운 지갑 소프트웨어의 사용 가능성과 데스크톱 컴퓨터에서 휴대폰과 태블릿으로 이동하는 일반적인 추세에 기인한 것으로 보고 있습니다.

트랜잭션을 처리할 수 있는 네트워크의 용량을 늘리면 특히 기존 금융 인프라가 취약한 지역에서 사용자와 기업의 채택이 늘어날 것입니다. 이는 더 많은 정치적 관할권에서 노드가 운영되는 더 강력한 네트워크로 이어질 수 있습니다.

===채굴의 중앙화: 비용===

채굴자는 지연 시간이 짧고 대역폭이 높은 연결을 통해 '블록 경쟁'(거의 동시에 두 개 이상의 블록이 발견되는 것)에서 승리할 확률이 높아지기 때문에 이점을 얻을 수 있습니다. 현재의 P2P 네트워킹 프로토콜에서는 더 큰 블록을 발표하려면 더 많은 대역폭이 필요합니다. 비용이 충분히 높아지면 결과적으로 매우 적은 수의 대규모 채굴자만 남게 됩니다.

이 BIP에서 제안하는 한계는 완전한 검증 노드를 실행하는 데 매우 적은 비용이 들도록 설계되었으며, 현재의 기술 비용 추세가 계속된다면 시간이 지남에 따라 비용은 더욱 낮아질 것입니다.

===채굴의 중앙화: 빅블록 공격===

[http://lists.linuxfoundation.org/pipermail/bitcoin-dev/2015-June/008820.html 시뮬레이션 결과] 현재 P2P 프로토콜에서는 지연 시간이 길거나 대역폭이 낮은 링크를 사용하는 채굴자가 지연 시간이 짧고 대역폭이 높은 링크를 통해 대부분의 해시파워에 연결된 채굴자에 비해 불리한 것으로 나타났습니다. 블록이 클수록 고대역폭 연결을 사용하는 마이너가 유리하지만, 새로운 블록이 발표되는 방식을 변경하면 이러한 이점을 최소화할 수 있습니다(예: http://bitcoinrelaynetwork.org/ ).

다른 채굴자에 대한 지연 시간과 대역폭이 채굴의 수익성에 영향을 미치는 유일한 변수이고 채굴자가 순전히 수익에 따라 움직인다면, 최종 결과는 하나의 컴퓨터에서 하나의 채굴자가 실행되며, 지연 시간은 0이고 대역폭은 사실상 무한대일 것입니다.

그러나 전기와 인건비, 부동산 비용, 폐열을 생산적으로 사용할 수 있는 능력, 채굴 장비에 투자할 수 있는 자본 접근성 등 다른 많은 요인들이 채굴자의 수익성에 영향을 미칩니다. 채굴 수익성 방정식에서 대역폭의 영향력이 증가한다고 해서 반드시 더 많은 중앙 집중화로 이어지는 것은 아닙니다.

===소비 되지 않은 트랜잭션 아웃풋 증가===

이 BIP는 UTXO의 연간 약 100% 증가를 제한하려는 시도를 하지 않습니다(자세한 내용은 http://gavinandresen.ninja/utxo-uhoh 참조). 저자는 이 문제가 별도의 BIP에 설명된 블록에 대한 추가 제한(아마도 블록 내 트랜잭션이 UTXO 설정 크기를 증가시킬 수 있는 정도에 대한 추가 제한)으로 해결되어야 한다고 생각하기 때문입니다.

==장기 수수료 인센티브==

http://gavinandresen.ninja/block-size-and-miner-fees-again

==고려되는 다른 솔루션==

지난 몇 년간 블록 크기를 늘리기 위한 수십 가지 제안이 있었습니다. 몇 가지 주목할 만한 아이디어를 소개합니다:

===일회성 증가===

일회성 소규모 증가, 예를 들어 2MB 블록은 가장 보수적인 옵션입니다.

그러나 일회성 증가는 장기적인 수정만큼이나 테스트 및 배포에 많은 주의가 필요합니다. 그리고 새로운 한도에 도달하자마자 얼마나 큰 한도가 적절한지에 대한 모든 논쟁이 반복될 것입니다.

===독적 제한 제안===

BIP 100은 코인베이스 트랜잭션에 표현된 채굴자 선호도에 따라 결정되는 동적 제한을 제안하며, 증가율에 제한을 두고 있습니다. 이는 채굴자가 최대 블록 크기를 보다 직접적으로 제어할 수 있도록 하는데, 이 제안을 장점으로 보는 사람들도 있고 단점으로 보는 사람들도 있습니다. 블록에 허용되는 최대 크기는 이전 블록의 코인베이스 트랜잭션에 포함된 정보에 따라 달라지기 때문에 구현하기가 더 복잡합니다(블록 콘텐츠가 '헤더 우선' 모드에서 순서 없이 가져오는 경우 즉시 알지 못할 수 있음).

메니 로젠펠드는 마이너가 더 큰 블록을 '지불'하기 위해 마이닝 보상을 희생할 것을 [https://bitcointalk.org/index.php?topic=1078521.0 제안했으며], 따라서 거래 수수료가 더 큰 블록을 생성하는 비용을 충당할 수 있을 때만 더 큰 블록을 생성할 인센티브가 있습니다. 이 제안은 구현하기가 훨씬 더 복잡하며, 중앙에서 통제하는 네트워크 전반의 최소 트랜잭션 수수료와 동일하지 않은 블록을 더 크게 만드는 비용을 설정하는 매개변수 집합을 찾을 수 있는지 여부는 명확하지 않습니다.

==호환성==

이는 비트코인 프로토콜의 하드포크 변경으로, 블록을 완전히 검증하는 코드를 실행하는 사람은 누구나 활성화 시간 전에 업그레이드해야 하며, 그렇지 않으면 1메가바이트 이상의 블록이 포함된 체인이 거부될 위험이 있습니다.

간편 결제 검증(Simplified Payment Verification) 소프트웨어는 거래의 최소 크기와 최대 블록 크기를 기준으로 거래의 머클 브랜치 최대 깊이에 대해 가정하지 않는 한 영향을 받지 않습니다.

==구현==

https://github.com/bitcoin/bitcoin/pull/6341

